# DemoAPI ‚Äì API Automation Testing Framework

---

## üìå Overview

üîç **What This Project Really Demonstrates**

- **Framework-oriented testing mindset**  
  Instead of writing scattered API test scripts, this project focuses on structuring API tests into a reusable and maintainable framework.

- **Clear separation of concerns**  
  Test logic, test data, and execution flow are separated, allowing tests to scale as the project grows.

- **Predictable and maintainable API regression testing**  
  By introducing Excel-based data-driven testing, standardized request handling, and unified HTML reporting, the framework makes regression testing easier to maintain and easier to understand‚Äîespecially when test cases change frequently.

- **Engineering / CI Demonstration**

- **Dockerized execution (Docker + Compose)**  
  The target API and the test runner are containerized to ensure **consistent environments** across local runs and CI.

- **FastAPI services (Target API + Test Trigger)**  
  A FastAPI-based target system is provided for repeatable API testing, and a lightweight trigger service can invoke the test runner.

- **Jenkins CI Pipeline (Pipeline from SCM)**  
  Jenkins pulls the repo, starts services via Docker Compose, runs the test suite, and archives reports as build artifacts.

üí° **When This Kind of Framework Is Useful**

This approach is especially suitable for:

- **Small to mid-sized backend systems**
- **Teams that rely heavily on API regression testing**
- **Scenarios where test cases change frequently and require clear traceability**

The framework is built using:

- **Python 3**
- **unittest**
- **DDT (Data-Driven Testing)**
- **Excel** for test case & test data management
- **HTMLTestRunner** for automated HTML report generation
- **FastAPI** (target API + optional test trigger service)
- **Docker & Docker Compose** (containerized environment + service networking)
- **Jenkins CI/CD** (pipeline from SCM + artifact archival)

---

## ‚ùì Why Build a Custom API Testing Framework?

Although there are many open-source API testing tools such as **Postman** and **JMeter**, they have several practical limitations in real projects.

### Key Limitations of Existing Tools

- **Test data is not controllable**  
  When API response data changes dynamically, it becomes difficult to perform stable assertions.  
  Failures may be caused by **code defects** or by **test data changes**, which are hard to distinguish.  
  Therefore, **test data initialization** and controlled test data are required.

- **Limited extensibility**  
  Many open-source tools are difficult to extend.  
  Customizing **test report formats** or integrating API tests into **CI pipelines** for scheduled execution is often inconvenient or unsupported.

---

## üîÅ API Testing Framework Workflow

Below is a sample HTML test report generated by this framework:

<img src="share/screenshots/Summary.png" width="800">

### Overall Workflow

1. Call the **target system APIs** using **data-driven testing**, reading test cases line by line from Excel.
2. Send API requests and compare API responses with expected values defined in Excel.
3. Use the **unittest** framework to assert API responses and generate **HTML test reports**.

---

## üê≥ Docker + FastAPI + Jenkins CI/CD

### Containerized Architecture (3 Services)

This project runs as **three containers** (Docker Compose):

- **target-api**: FastAPI target system under test (SUT)
- **trigger**: test runner container (executes `python run_demo.py` inside a clean environment)
- **jenkins**: CI orchestrator (pulls repo ‚Üí compose up ‚Üí run tests ‚Üí archive reports)

Key CI design choices:

- Tests are executed **inside the `trigger` container**, so Jenkins node does not need Python dependencies installed.
- Services communicate via the **Docker Compose network** (e.g., `http://target-api:8000`).
- Jenkins archives the generated artifacts (HTML report + Excel result file) after each run.

---

## ü§ñ Jenkins CI Evidence (Screenshots)

### Jenkins Job Setup (Pipeline from SCM)

<img src="share/screenshots/Jenkins_setup.png" width="900">

### CI Build Passed + Artifacts Archived

<img src="share/screenshots/Jenkins_CI_pass.png" width="900">

---

## üìÇ Project Directory Structure

| Directory / File | Description |
|------------------|-------------|
| `config/` | Path and environment configuration files |
| `database/` | Test case templates and configuration files |
| `lib/` | Core framework modules (Excel read/write, request handling) |
| `package/` | Third-party libraries (HTMLTestRunner) |
| `report/` | Generated API automation test reports |
| `testcase/` | API automation test cases |
| `run_demo.py` | Main entry script to execute all API test cases |
| `app.py` | FastAPI target API service (SUT) |
| `api_trigger.py` | Optional FastAPI trigger service (`/run-tests` ‚Üí runs `run_demo.py`) |
| `docker-compose.yml` | Orchestrates `target-api` + `trigger` + `jenkins` containers |
| `Dockerfile` / `Dockerfile.jenkins` | Container build definitions |
| `Jenkinsfile` | Jenkins pipeline: compose up ‚Üí wait readiness ‚Üí run tests ‚Üí archive artifacts |

---

## ‚ñ∂Ô∏è How to Run This Project

> **Note:** This is a public demonstration project.  
> Environment-specific configurations (database credentials, email accounts) are intentionally excluded.

### 1. Environment Setup

- Python 3.x
- Required Python packages:
  - requests
  - unittest
  - ddt
  - openpyxl

### 2. Configuration

Create a local configuration file based on the example template:

```bash
cp database/config.ini.example database/config.ini
```

Fill in your local database and email configuration if you want to execute the project end-to-end.

### 3. Execute Tests (Local Python)

Run the main entry script:

```bash
python run_demo.py
```

After execution, an HTML test report will be generated under the `report/` directory.

### 4. Execute via Docker Compose (CI-Consistent)

```bash
docker compose up -d --build
# run tests inside trigger container (same style as CI)
docker compose exec -T trigger python run_demo.py
```

Reports will be generated in the container and can be copied/archived by CI.

---

## ‚úÖ Notes for Reviewers

- This repository focuses on **framework design and structure**, not environment-specific setup.
- Sensitive configuration files are excluded for security reasons.
- The project is designed to be **readable, extensible, and CI-friendly**.
- ‚úÖ CI pipeline produces reviewable artifacts (HTML report + Excel result sheet) for each Jenkins build run.
